/**
  ******************************************************************************
  * @file    main.c
  * @author  Auto-generated by STM32CubeIDE
  * @version V1.0
  * @brief   Default main function.
  ******************************************************************************
*/



#include <stdio.h>
#include "uart_driver.h"
#include "registers.h"

#define F_CPU 16000000UL

// main
int main(void){

	while (1!=0) {

	init_usart2(19200,F_CPU);
	//enable clock GPIO B
	uint32_t *clock = (uint32_t) RCC_BASE;
	*clock |= (1<<1);

	//analog mode PB4
	uint32_t *speaker = (uint32_t) GPIOB_BASE;
	*speaker |= (0b01<<(4*2));

	//ODR
	//Insert FLOAT?
	uint32_t *note = (uint32_t)(ODR*4 + GPIOB_BASE);
	*note = 500;

	delay_ms(1);

	}

	// never return
	for(;;){}

	return 0;
}

